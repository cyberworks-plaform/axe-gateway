2025-11-05 16:37:20.114 +00:00 [INF] Starting up Ce.Gateway.Api
2025-11-05 16:37:22.072 +00:00 [INF] User profile is available. Using '/home/runner/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-11-05 16:37:22.127 +00:00 [INF] Creating key {6fbeb929-c272-4f4b-96fb-9b920b2d693c} with creation date 2025-11-05 16:37:22Z, activation date 2025-11-05 16:37:22Z, and expiration date 2026-02-03 16:37:22Z.
2025-11-05 16:37:22.160 +00:00 [WRN] No XML encryptor configured. Key {6fbeb929-c272-4f4b-96fb-9b920b2d693c} may be persisted to storage in unencrypted form.
2025-11-05 16:37:22.163 +00:00 [INF] Writing data to file '/home/runner/.aspnet/DataProtection-Keys/key-6fbeb929-c272-4f4b-96fb-9b920b2d693c.xml'.
2025-11-05 16:37:22.171 +00:00 [INF] Initializing UI Database
2025-11-05 16:37:22.765 +00:00 [INF] Saving healthchecks configuration to database
2025-11-05 16:37:22.837 +00:00 [INF] Saved 2 entities to in-memory store.
2025-11-05 16:37:22.843 +00:00 [INF] Downstream Health Monitor Service running.
2025-11-05 16:37:22.844 +00:00 [INF] Downstream Health Monitor Service is checking health.
2025-11-05 16:37:22.982 +00:00 [INF] Start processing HTTP request GET http://localhost:10501/health
2025-11-05 16:37:22.983 +00:00 [INF] Start processing HTTP request GET http://localhost:10502/health
2025-11-05 16:37:22.985 +00:00 [INF] Sending HTTP request GET http://localhost:10501/health
2025-11-05 16:37:22.985 +00:00 [INF] Sending HTTP request GET http://localhost:10502/health
2025-11-05 16:37:23.022 +00:00 [ERR] Error checking health for http://localhost:10501/health: Connection refused (localhost:10501)
System.Net.Http.HttpRequestException: Connection refused (localhost:10501)
 ---> System.Net.Sockets.SocketException (111): Connection refused
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.InjectNewHttp11ConnectionAsync(QueueItem queueItem)
   at System.Threading.Tasks.TaskCompletionSourceWithCancellation`1.WaitWithCancellationAsync(CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|4_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|4_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at Ce.Gateway.Api.Services.DownstreamHealthMonitorService.<>c__DisplayClass10_0.<<CheckAllDownstreamServicesHealth>b__0>d.MoveNext() in /home/runner/work/axe-gateway/axe-gateway/Ce.Gateway.Api/Services/DownstreamHealthMonitorService.cs:line 91
2025-11-05 16:37:23.022 +00:00 [ERR] Error checking health for http://localhost:10502/health: Connection refused (localhost:10502)
System.Net.Http.HttpRequestException: Connection refused (localhost:10502)
 ---> System.Net.Sockets.SocketException (111): Connection refused
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.InjectNewHttp11ConnectionAsync(QueueItem queueItem)
   at System.Threading.Tasks.TaskCompletionSourceWithCancellation`1.WaitWithCancellationAsync(CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|4_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|4_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at Ce.Gateway.Api.Services.DownstreamHealthMonitorService.<>c__DisplayClass10_0.<<CheckAllDownstreamServicesHealth>b__0>d.MoveNext() in /home/runner/work/axe-gateway/axe-gateway/Ce.Gateway.Api/Services/DownstreamHealthMonitorService.cs:line 91
2025-11-05 16:37:23.534 +00:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA journal_mode = 'wal';
2025-11-05 16:37:23.540 +00:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-11-05 16:37:23.544 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-11-05 16:37:23.546 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsLock" (
    "Id" INTEGER NOT NULL CONSTRAINT "PK___EFMigrationsLock" PRIMARY KEY,
    "Timestamp" TEXT NOT NULL
);
2025-11-05 16:37:23.548 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-11-05 16:37:23.547467+00:00');
SELECT changes();
2025-11-05 16:37:23.588 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-11-05 16:37:23.595 +00:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-11-05 16:37:23.597 +00:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-11-05 16:37:23.605 +00:00 [INF] Applying migration '20251023025127_InitialCreate'.
2025-11-05 16:37:23.613 +00:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "OcrGatewayLogEntries" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_OcrGatewayLogEntries" PRIMARY KEY,
    "CreatedAtUtc" TEXT NOT NULL,
    "TraceId" TEXT NULL,
    "UpstreamHost" TEXT NULL,
    "UpstreamPort" INTEGER NULL,
    "UpstreamScheme" TEXT NULL,
    "UpstreamHttpMethod" TEXT NULL,
    "UpstreamPath" TEXT NULL,
    "UpstreamQueryString" TEXT NULL,
    "UpstreamRequestSize" INTEGER NULL,
    "UpstreamClientIp" TEXT NULL,
    "DownstreamScheme" TEXT NULL,
    "DownstreamHost" TEXT NULL,
    "DownstreamPort" INTEGER NULL,
    "DownstreamPath" TEXT NULL,
    "DownstreamQueryString" TEXT NULL,
    "DownstreamRequestSize" INTEGER NULL,
    "DownstreamResponseSize" INTEGER NULL,
    "DownstreamStatusCode" INTEGER NULL,
    "GatewayLatencyMs" INTEGER NOT NULL,
    "IsError" INTEGER NOT NULL,
    "ErrorMessage" TEXT NULL
);
2025-11-05 16:37:23.614 +00:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_OcrGatewayLogEntries_CreatedAtUtc" ON "OcrGatewayLogEntries" ("CreatedAtUtc");
2025-11-05 16:37:23.614 +00:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_OcrGatewayLogEntries_DownstreamHost" ON "OcrGatewayLogEntries" ("DownstreamHost");
2025-11-05 16:37:23.614 +00:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20251023025127_InitialCreate', '9.0.0');
2025-11-05 16:37:23.615 +00:00 [INF] Applying migration '20251023082441_addRequestBodyToRequestLogEntry'.
2025-11-05 16:37:23.617 +00:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "OcrGatewayLogEntries" ADD "RequestBody" TEXT NULL;
2025-11-05 16:37:23.617 +00:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20251023082441_addRequestBodyToRequestLogEntry', '9.0.0');
2025-11-05 16:37:23.618 +00:00 [INF] Applying migration '20251104055329_AddDashboardPerformanceIndexes'.
2025-11-05 16:37:23.619 +00:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_OcrGatewayLogEntries_CreatedAtUtc_DownstreamStatusCode" ON "OcrGatewayLogEntries" ("CreatedAtUtc", "DownstreamStatusCode");
2025-11-05 16:37:23.620 +00:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_OcrGatewayLogEntries_CreatedAtUtc_IsError" ON "OcrGatewayLogEntries" ("CreatedAtUtc", "IsError");
2025-11-05 16:37:23.620 +00:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_OcrGatewayLogEntries_UpstreamHost" ON "OcrGatewayLogEntries" ("UpstreamHost");
2025-11-05 16:37:23.621 +00:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_OcrGatewayLogEntries_UpstreamPath" ON "OcrGatewayLogEntries" ("UpstreamPath");
2025-11-05 16:37:23.621 +00:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20251104055329_AddDashboardPerformanceIndexes', '9.0.0');
2025-11-05 16:37:23.621 +00:00 [INF] Applying migration '20251105153016_AddUsersTable'.
2025-11-05 16:37:23.625 +00:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Users" (
    "Id" INTEGER NOT NULL CONSTRAINT "PK_Users" PRIMARY KEY AUTOINCREMENT,
    "Username" TEXT NOT NULL,
    "PasswordHash" TEXT NOT NULL,
    "FullName" TEXT NULL,
    "Email" TEXT NULL,
    "Role" TEXT NOT NULL,
    "IsActive" INTEGER NOT NULL,
    "CreatedAt" TEXT NOT NULL,
    "LastLoginAt" TEXT NULL,
    "UpdatedAt" TEXT NULL
);
2025-11-05 16:37:23.625 +00:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Users_Email" ON "Users" ("Email");
2025-11-05 16:37:23.626 +00:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_Users_Username" ON "Users" ("Username");
2025-11-05 16:37:23.626 +00:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20251105153016_AddUsersTable', '9.0.0');
2025-11-05 16:37:23.626 +00:00 [INF] Applying migration '20251105155300_AddIdentityTables'.
2025-11-05 16:37:23.641 +00:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP TABLE "Users";
2025-11-05 16:37:23.641 +00:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "AspNetRoles" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_AspNetRoles" PRIMARY KEY,
    "Name" TEXT NULL,
    "NormalizedName" TEXT NULL,
    "ConcurrencyStamp" TEXT NULL
);
2025-11-05 16:37:23.642 +00:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "AspNetUsers" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_AspNetUsers" PRIMARY KEY,
    "FullName" TEXT NULL,
    "IsActive" INTEGER NOT NULL,
    "CreatedAt" TEXT NOT NULL,
    "LastLoginAt" TEXT NULL,
    "UpdatedAt" TEXT NULL,
    "UserName" TEXT NULL,
    "NormalizedUserName" TEXT NULL,
    "Email" TEXT NULL,
    "NormalizedEmail" TEXT NULL,
    "EmailConfirmed" INTEGER NOT NULL,
    "PasswordHash" TEXT NULL,
    "SecurityStamp" TEXT NULL,
    "ConcurrencyStamp" TEXT NULL,
    "PhoneNumber" TEXT NULL,
    "PhoneNumberConfirmed" INTEGER NOT NULL,
    "TwoFactorEnabled" INTEGER NOT NULL,
    "LockoutEnd" TEXT NULL,
    "LockoutEnabled" INTEGER NOT NULL,
    "AccessFailedCount" INTEGER NOT NULL
);
2025-11-05 16:37:23.642 +00:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "AspNetRoleClaims" (
    "Id" INTEGER NOT NULL CONSTRAINT "PK_AspNetRoleClaims" PRIMARY KEY AUTOINCREMENT,
    "RoleId" TEXT NOT NULL,
    "ClaimType" TEXT NULL,
    "ClaimValue" TEXT NULL,
    CONSTRAINT "FK_AspNetRoleClaims_AspNetRoles_RoleId" FOREIGN KEY ("RoleId") REFERENCES "AspNetRoles" ("Id") ON DELETE CASCADE
);
2025-11-05 16:37:23.643 +00:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "AspNetUserClaims" (
    "Id" INTEGER NOT NULL CONSTRAINT "PK_AspNetUserClaims" PRIMARY KEY AUTOINCREMENT,
    "UserId" TEXT NOT NULL,
    "ClaimType" TEXT NULL,
    "ClaimValue" TEXT NULL,
    CONSTRAINT "FK_AspNetUserClaims_AspNetUsers_UserId" FOREIGN KEY ("UserId") REFERENCES "AspNetUsers" ("Id") ON DELETE CASCADE
);
2025-11-05 16:37:23.643 +00:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "AspNetUserLogins" (
    "LoginProvider" TEXT NOT NULL,
    "ProviderKey" TEXT NOT NULL,
    "ProviderDisplayName" TEXT NULL,
    "UserId" TEXT NOT NULL,
    CONSTRAINT "PK_AspNetUserLogins" PRIMARY KEY ("LoginProvider", "ProviderKey"),
    CONSTRAINT "FK_AspNetUserLogins_AspNetUsers_UserId" FOREIGN KEY ("UserId") REFERENCES "AspNetUsers" ("Id") ON DELETE CASCADE
);
2025-11-05 16:37:23.643 +00:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "AspNetUserRoles" (
    "UserId" TEXT NOT NULL,
    "RoleId" TEXT NOT NULL,
    CONSTRAINT "PK_AspNetUserRoles" PRIMARY KEY ("UserId", "RoleId"),
    CONSTRAINT "FK_AspNetUserRoles_AspNetRoles_RoleId" FOREIGN KEY ("RoleId") REFERENCES "AspNetRoles" ("Id") ON DELETE CASCADE,
    CONSTRAINT "FK_AspNetUserRoles_AspNetUsers_UserId" FOREIGN KEY ("UserId") REFERENCES "AspNetUsers" ("Id") ON DELETE CASCADE
);
2025-11-05 16:37:23.644 +00:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "AspNetUserTokens" (
    "UserId" TEXT NOT NULL,
    "LoginProvider" TEXT NOT NULL,
    "Name" TEXT NOT NULL,
    "Value" TEXT NULL,
    CONSTRAINT "PK_AspNetUserTokens" PRIMARY KEY ("UserId", "LoginProvider", "Name"),
    CONSTRAINT "FK_AspNetUserTokens_AspNetUsers_UserId" FOREIGN KEY ("UserId") REFERENCES "AspNetUsers" ("Id") ON DELETE CASCADE
);
2025-11-05 16:37:23.644 +00:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_AspNetRoleClaims_RoleId" ON "AspNetRoleClaims" ("RoleId");
2025-11-05 16:37:23.645 +00:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "RoleNameIndex" ON "AspNetRoles" ("NormalizedName");
2025-11-05 16:37:23.645 +00:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_AspNetUserClaims_UserId" ON "AspNetUserClaims" ("UserId");
2025-11-05 16:37:23.645 +00:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_AspNetUserLogins_UserId" ON "AspNetUserLogins" ("UserId");
2025-11-05 16:37:23.646 +00:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_AspNetUserRoles_RoleId" ON "AspNetUserRoles" ("RoleId");
2025-11-05 16:37:23.646 +00:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "EmailIndex" ON "AspNetUsers" ("NormalizedEmail");
2025-11-05 16:37:23.647 +00:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "UserNameIndex" ON "AspNetUsers" ("NormalizedUserName");
2025-11-05 16:37:23.647 +00:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20251105155300_AddIdentityTables', '9.0.0');
2025-11-05 16:37:23.651 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-11-05 16:37:23.806 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedName_0='?' (Size = 13)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."ConcurrencyStamp", "a"."Name", "a"."NormalizedName"
FROM "AspNetRoles" AS "a"
WHERE "a"."NormalizedName" = @__normalizedName_0
LIMIT 1
2025-11-05 16:37:23.814 +00:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 13)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."ConcurrencyStamp", "a"."Name", "a"."NormalizedName"
FROM "AspNetRoles" AS "a"
WHERE "a"."NormalizedName" = @__normalizedName_0
LIMIT 1
2025-11-05 16:37:23.866 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 36), @p1='?', @p2='?' (Size = 13), @p3='?' (Size = 13)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AspNetRoles" ("Id", "ConcurrencyStamp", "Name", "NormalizedName")
VALUES (@p0, @p1, @p2, @p3);
2025-11-05 16:37:23.869 +00:00 [INF] Role Administrator created
2025-11-05 16:37:23.869 +00:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."ConcurrencyStamp", "a"."Name", "a"."NormalizedName"
FROM "AspNetRoles" AS "a"
WHERE "a"."NormalizedName" = @__normalizedName_0
LIMIT 1
2025-11-05 16:37:23.870 +00:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."ConcurrencyStamp", "a"."Name", "a"."NormalizedName"
FROM "AspNetRoles" AS "a"
WHERE "a"."NormalizedName" = @__normalizedName_0
LIMIT 1
2025-11-05 16:37:23.873 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 36), @p1='?', @p2='?' (Size = 10), @p3='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AspNetRoles" ("Id", "ConcurrencyStamp", "Name", "NormalizedName")
VALUES (@p0, @p1, @p2, @p3);
2025-11-05 16:37:23.873 +00:00 [INF] Role Management created
2025-11-05 16:37:23.874 +00:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."ConcurrencyStamp", "a"."Name", "a"."NormalizedName"
FROM "AspNetRoles" AS "a"
WHERE "a"."NormalizedName" = @__normalizedName_0
LIMIT 1
2025-11-05 16:37:23.874 +00:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."ConcurrencyStamp", "a"."Name", "a"."NormalizedName"
FROM "AspNetRoles" AS "a"
WHERE "a"."NormalizedName" = @__normalizedName_0
LIMIT 1
2025-11-05 16:37:23.876 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 36), @p1='?', @p2='?' (Size = 7), @p3='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AspNetRoles" ("Id", "ConcurrencyStamp", "Name", "NormalizedName")
VALUES (@p0, @p1, @p2, @p3);
2025-11-05 16:37:23.876 +00:00 [INF] Role Monitor created
2025-11-05 16:37:23.884 +00:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."CreatedAt", "a"."Email", "a"."EmailConfirmed", "a"."FullName", "a"."IsActive", "a"."LastLoginAt", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UpdatedAt", "a"."UserName"
FROM "AspNetUsers" AS "a"
WHERE "a"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2025-11-05 16:37:23.964 +00:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."CreatedAt", "a"."Email", "a"."EmailConfirmed", "a"."FullName", "a"."IsActive", "a"."LastLoginAt", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UpdatedAt", "a"."UserName"
FROM "AspNetUsers" AS "a"
WHERE "a"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2025-11-05 16:37:24.016 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 36), @p1='?' (DbType = Int32), @p2='?' (Size = 36), @p3='?' (DbType = DateTime), @p4='?' (Size = 19), @p5='?' (DbType = Boolean), @p6='?' (Size = 20), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTimeOffset), @p11='?' (Size = 19), @p12='?' (Size = 5), @p13='?' (Size = 84), @p14='?', @p15='?' (DbType = Boolean), @p16='?' (Size = 32), @p17='?' (DbType = Boolean), @p18='?' (DbType = DateTime), @p19='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AspNetUsers" ("Id", "AccessFailedCount", "ConcurrencyStamp", "CreatedAt", "Email", "EmailConfirmed", "FullName", "IsActive", "LastLoginAt", "LockoutEnabled", "LockoutEnd", "NormalizedEmail", "NormalizedUserName", "PasswordHash", "PhoneNumber", "PhoneNumberConfirmed", "SecurityStamp", "TwoFactorEnabled", "UpdatedAt", "UserName")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
2025-11-05 16:37:24.023 +00:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 13)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."ConcurrencyStamp", "a"."Name", "a"."NormalizedName"
FROM "AspNetRoles" AS "a"
WHERE "a"."NormalizedName" = @__normalizedRoleName_0
LIMIT 2
2025-11-05 16:37:24.039 +00:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36), @__p_1='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."UserId", "a"."RoleId"
FROM "AspNetUserRoles" AS "a"
WHERE "a"."UserId" = @__p_0 AND "a"."RoleId" = @__p_1
LIMIT 1
2025-11-05 16:37:24.041 +00:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 13)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."ConcurrencyStamp", "a"."Name", "a"."NormalizedName"
FROM "AspNetRoles" AS "a"
WHERE "a"."NormalizedName" = @__normalizedRoleName_0
LIMIT 2
2025-11-05 16:37:24.048 +00:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."CreatedAt", "a"."Email", "a"."EmailConfirmed", "a"."FullName", "a"."IsActive", "a"."LastLoginAt", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UpdatedAt", "a"."UserName"
FROM "AspNetUsers" AS "a"
WHERE "a"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2025-11-05 16:37:24.058 +00:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 36), @p1='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AspNetUserRoles" ("RoleId", "UserId")
VALUES (@p0, @p1);
2025-11-05 16:37:24.060 +00:00 [INF] Executed DbCommand (0ms) [Parameters=[@p19='?' (Size = 36), @p0='?' (DbType = Int32), @p1='?' (Size = 36), @p20='?' (Size = 36), @p2='?' (DbType = DateTime), @p3='?' (Size = 19), @p4='?' (DbType = Boolean), @p5='?' (Size = 20), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTime), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 19), @p11='?' (Size = 5), @p12='?' (Size = 84), @p13='?', @p14='?' (DbType = Boolean), @p15='?' (Size = 32), @p16='?' (DbType = Boolean), @p17='?' (DbType = DateTime), @p18='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
UPDATE "AspNetUsers" SET "AccessFailedCount" = @p0, "ConcurrencyStamp" = @p1, "CreatedAt" = @p2, "Email" = @p3, "EmailConfirmed" = @p4, "FullName" = @p5, "IsActive" = @p6, "LastLoginAt" = @p7, "LockoutEnabled" = @p8, "LockoutEnd" = @p9, "NormalizedEmail" = @p10, "NormalizedUserName" = @p11, "PasswordHash" = @p12, "PhoneNumber" = @p13, "PhoneNumberConfirmed" = @p14, "SecurityStamp" = @p15, "TwoFactorEnabled" = @p16, "UpdatedAt" = @p17, "UserName" = @p18
WHERE "Id" = @p19 AND "ConcurrencyStamp" = @p20
RETURNING 1;
2025-11-05 16:37:24.065 +00:00 [INF] Default admin user created successfully. Username: admin, Password: admin123
2025-11-05 16:37:24.188 +00:00 [INF] Service is running
2025-11-05 16:37:24.309 +00:00 [WRN] The ASP.NET Core developer certificate is not trusted. For information about trusting the ASP.NET Core developer certificate, see https://aka.ms/aspnet/https-trust-dev-cert
2025-11-05 16:37:24.316 +00:00 [INF] Now listening on: https://localhost:5001
2025-11-05 16:37:24.316 +00:00 [INF] Now listening on: http://localhost:5000
2025-11-05 16:37:24.355 +00:00 [INF] Start processing HTTP request GET http://localhost:10501/health
2025-11-05 16:37:24.355 +00:00 [INF] Sending HTTP request GET http://localhost:10501/health
2025-11-05 16:37:24.357 +00:00 [ERR] GetHealthReport threw an exception when trying to get report from http://localhost:10501/health configured with name Fake OCR node 1.
System.Net.Http.HttpRequestException: Connection refused (localhost:10501)
 ---> System.Net.Sockets.SocketException (111): Connection refused
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.InjectNewHttp11ConnectionAsync(QueueItem queueItem)
   at System.Threading.Tasks.TaskCompletionSourceWithCancellation`1.WaitWithCancellationAsync(CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|4_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|4_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at HealthChecks.UI.Core.HostedService.HealthCheckReportCollector.GetHealthReportAsync(HealthCheckConfiguration configuration) in /home/runner/work/AspNetCore.Diagnostics.HealthChecks/AspNetCore.Diagnostics.HealthChecks/src/HealthChecks.UI/Core/HostedService/HealthCheckReportCollector.cs:line 142
2025-11-05 16:37:24.358 +00:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-05 16:37:24.361 +00:00 [INF] Hosting environment: Development
2025-11-05 16:37:24.361 +00:00 [INF] Content root path: /home/runner/work/axe-gateway/axe-gateway/Ce.Gateway.Api
2025-11-05 16:37:24.398 +00:00 [INF] Saved 1 entities to in-memory store.
2025-11-05 16:37:24.474 +00:00 [INF] Saved 2 entities to in-memory store.
2025-11-05 16:37:24.475 +00:00 [INF] Start processing HTTP request GET http://localhost:10502/health
2025-11-05 16:37:24.475 +00:00 [INF] Sending HTTP request GET http://localhost:10502/health
2025-11-05 16:37:24.476 +00:00 [ERR] GetHealthReport threw an exception when trying to get report from http://localhost:10502/health configured with name Fake OCR node 2.
System.Net.Http.HttpRequestException: Connection refused (localhost:10502)
 ---> System.Net.Sockets.SocketException (111): Connection refused
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.InjectNewHttp11ConnectionAsync(QueueItem queueItem)
   at System.Threading.Tasks.TaskCompletionSourceWithCancellation`1.WaitWithCancellationAsync(CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|4_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|4_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at HealthChecks.UI.Core.HostedService.HealthCheckReportCollector.GetHealthReportAsync(HealthCheckConfiguration configuration) in /home/runner/work/AspNetCore.Diagnostics.HealthChecks/AspNetCore.Diagnostics.HealthChecks/src/HealthChecks.UI/Core/HostedService/HealthCheckReportCollector.cs:line 142
2025-11-05 16:37:24.480 +00:00 [INF] Saved 1 entities to in-memory store.
2025-11-05 16:37:24.483 +00:00 [INF] Saved 2 entities to in-memory store.
2025-11-05 16:38:06.891 +00:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/account/login - null null
2025-11-05 16:38:06.924 +00:00 [INF] Executing endpoint 'Ce.Gateway.Api.Controllers.Pages.AccountController.Login (Ce.Gateway.Api)'
2025-11-05 16:38:06.932 +00:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller Ce.Gateway.Api.Controllers.Pages.AccountController (Ce.Gateway.Api).
2025-11-05 16:38:06.966 +00:00 [INF] Executing action method Ce.Gateway.Api.Controllers.Pages.AccountController.Login (Ce.Gateway.Api) - Validation state: "Valid"
2025-11-05 16:38:06.969 +00:00 [INF] Executed action method Ce.Gateway.Api.Controllers.Pages.AccountController.Login (Ce.Gateway.Api), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.3869ms.
2025-11-05 16:38:06.980 +00:00 [INF] Executing ViewResult, running view Login.
2025-11-05 16:38:07.003 +00:00 [INF] Executed ViewResult - view Login executed in 23.7972ms.
2025-11-05 16:38:07.004 +00:00 [INF] Executed action Ce.Gateway.Api.Controllers.Pages.AccountController.Login (Ce.Gateway.Api) in 70.8055ms
2025-11-05 16:38:07.004 +00:00 [INF] Executed endpoint 'Ce.Gateway.Api.Controllers.Pages.AccountController.Login (Ce.Gateway.Api)'
2025-11-05 16:38:07.007 +00:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/account/login - 200 null text/html; charset=utf-8 117.8058ms
2025-11-05 16:38:22.843 +00:00 [INF] Downstream Health Monitor Service is checking health.
2025-11-05 16:38:22.844 +00:00 [INF] Start processing HTTP request GET http://localhost:10501/health
2025-11-05 16:38:22.844 +00:00 [INF] Start processing HTTP request GET http://localhost:10502/health
2025-11-05 16:38:22.844 +00:00 [INF] Sending HTTP request GET http://localhost:10501/health
2025-11-05 16:38:22.845 +00:00 [INF] Sending HTTP request GET http://localhost:10502/health
2025-11-05 16:38:22.846 +00:00 [ERR] Error checking health for http://localhost:10501/health: Connection refused (localhost:10501)
System.Net.Http.HttpRequestException: Connection refused (localhost:10501)
 ---> System.Net.Sockets.SocketException (111): Connection refused
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.InjectNewHttp11ConnectionAsync(QueueItem queueItem)
   at System.Threading.Tasks.TaskCompletionSourceWithCancellation`1.WaitWithCancellationAsync(CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|4_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|4_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at Ce.Gateway.Api.Services.DownstreamHealthMonitorService.<>c__DisplayClass10_0.<<CheckAllDownstreamServicesHealth>b__0>d.MoveNext() in /home/runner/work/axe-gateway/axe-gateway/Ce.Gateway.Api/Services/DownstreamHealthMonitorService.cs:line 91
2025-11-05 16:38:22.846 +00:00 [ERR] Error checking health for http://localhost:10502/health: Connection refused (localhost:10502)
System.Net.Http.HttpRequestException: Connection refused (localhost:10502)
 ---> System.Net.Sockets.SocketException (111): Connection refused
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.InjectNewHttp11ConnectionAsync(QueueItem queueItem)
   at System.Threading.Tasks.TaskCompletionSourceWithCancellation`1.WaitWithCancellationAsync(CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|4_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|4_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at Ce.Gateway.Api.Services.DownstreamHealthMonitorService.<>c__DisplayClass10_0.<<CheckAllDownstreamServicesHealth>b__0>d.MoveNext() in /home/runner/work/axe-gateway/axe-gateway/Ce.Gateway.Api/Services/DownstreamHealthMonitorService.cs:line 91
2025-11-05 16:38:24.077 +00:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/account/login - null null
2025-11-05 16:38:24.080 +00:00 [INF] Executing endpoint 'Ce.Gateway.Api.Controllers.Pages.AccountController.Login (Ce.Gateway.Api)'
2025-11-05 16:38:24.080 +00:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller Ce.Gateway.Api.Controllers.Pages.AccountController (Ce.Gateway.Api).
2025-11-05 16:38:24.082 +00:00 [INF] Executing action method Ce.Gateway.Api.Controllers.Pages.AccountController.Login (Ce.Gateway.Api) - Validation state: "Valid"
2025-11-05 16:38:24.082 +00:00 [INF] Executed action method Ce.Gateway.Api.Controllers.Pages.AccountController.Login (Ce.Gateway.Api), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.0268ms.
2025-11-05 16:38:24.083 +00:00 [INF] Executing ViewResult, running view Login.
2025-11-05 16:38:24.086 +00:00 [INF] Executed ViewResult - view Login executed in 3.0433ms.
2025-11-05 16:38:24.086 +00:00 [INF] Executed action Ce.Gateway.Api.Controllers.Pages.AccountController.Login (Ce.Gateway.Api) in 5.6515ms
2025-11-05 16:38:24.086 +00:00 [INF] Executed endpoint 'Ce.Gateway.Api.Controllers.Pages.AccountController.Login (Ce.Gateway.Api)'
2025-11-05 16:38:24.087 +00:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/account/login - 200 null text/html; charset=utf-8 10.087ms
2025-11-05 16:38:24.515 +00:00 [INF] Start processing HTTP request GET http://localhost:10501/health
2025-11-05 16:38:24.515 +00:00 [INF] Sending HTTP request GET http://localhost:10501/health
2025-11-05 16:38:24.516 +00:00 [ERR] GetHealthReport threw an exception when trying to get report from http://localhost:10501/health configured with name Fake OCR node 1.
System.Net.Http.HttpRequestException: Connection refused (localhost:10501)
 ---> System.Net.Sockets.SocketException (111): Connection refused
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.InjectNewHttp11ConnectionAsync(QueueItem queueItem)
   at System.Threading.Tasks.TaskCompletionSourceWithCancellation`1.WaitWithCancellationAsync(CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|4_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|4_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at HealthChecks.UI.Core.HostedService.HealthCheckReportCollector.GetHealthReportAsync(HealthCheckConfiguration configuration) in /home/runner/work/AspNetCore.Diagnostics.HealthChecks/AspNetCore.Diagnostics.HealthChecks/src/HealthChecks.UI/Core/HostedService/HealthCheckReportCollector.cs:line 142
2025-11-05 16:38:24.520 +00:00 [INF] Notification is sent on same window time.
2025-11-05 16:38:24.530 +00:00 [INF] Saved 1 entities to in-memory store.
2025-11-05 16:38:24.530 +00:00 [INF] Start processing HTTP request GET http://localhost:10502/health
2025-11-05 16:38:24.530 +00:00 [INF] Sending HTTP request GET http://localhost:10502/health
2025-11-05 16:38:24.533 +00:00 [ERR] GetHealthReport threw an exception when trying to get report from http://localhost:10502/health configured with name Fake OCR node 2.
System.Net.Http.HttpRequestException: Connection refused (localhost:10502)
 ---> System.Net.Sockets.SocketException (111): Connection refused
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.InjectNewHttp11ConnectionAsync(QueueItem queueItem)
   at System.Threading.Tasks.TaskCompletionSourceWithCancellation`1.WaitWithCancellationAsync(CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|4_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|4_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at HealthChecks.UI.Core.HostedService.HealthCheckReportCollector.GetHealthReportAsync(HealthCheckConfiguration configuration) in /home/runner/work/AspNetCore.Diagnostics.HealthChecks/AspNetCore.Diagnostics.HealthChecks/src/HealthChecks.UI/Core/HostedService/HealthCheckReportCollector.cs:line 142
2025-11-05 16:38:24.536 +00:00 [INF] Notification is sent on same window time.
2025-11-05 16:38:24.537 +00:00 [INF] Saved 1 entities to in-memory store.
2025-11-05 16:38:40.799 +00:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/account/login - null null
2025-11-05 16:38:40.801 +00:00 [INF] Executing endpoint 'Ce.Gateway.Api.Controllers.Pages.AccountController.Login (Ce.Gateway.Api)'
2025-11-05 16:38:40.801 +00:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller Ce.Gateway.Api.Controllers.Pages.AccountController (Ce.Gateway.Api).
2025-11-05 16:38:40.809 +00:00 [INF] Executing action method Ce.Gateway.Api.Controllers.Pages.AccountController.Login (Ce.Gateway.Api) - Validation state: "Valid"
2025-11-05 16:38:40.810 +00:00 [INF] Executed action method Ce.Gateway.Api.Controllers.Pages.AccountController.Login (Ce.Gateway.Api), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.0188ms.
2025-11-05 16:38:40.810 +00:00 [INF] Executing ViewResult, running view Login.
2025-11-05 16:38:40.811 +00:00 [INF] Executed ViewResult - view Login executed in 1.1609ms.
2025-11-05 16:38:40.811 +00:00 [INF] Executed action Ce.Gateway.Api.Controllers.Pages.AccountController.Login (Ce.Gateway.Api) in 9.7855ms
2025-11-05 16:38:40.811 +00:00 [INF] Executed endpoint 'Ce.Gateway.Api.Controllers.Pages.AccountController.Login (Ce.Gateway.Api)'
2025-11-05 16:38:40.812 +00:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/account/login - 200 null text/html; charset=utf-8 12.6329ms
2025-11-05 16:39:22.843 +00:00 [INF] Downstream Health Monitor Service is checking health.
2025-11-05 16:39:22.844 +00:00 [INF] Start processing HTTP request GET http://localhost:10501/health
2025-11-05 16:39:22.844 +00:00 [INF] Start processing HTTP request GET http://localhost:10502/health
2025-11-05 16:39:22.844 +00:00 [INF] Sending HTTP request GET http://localhost:10501/health
2025-11-05 16:39:22.845 +00:00 [INF] Sending HTTP request GET http://localhost:10502/health
2025-11-05 16:39:22.846 +00:00 [ERR] Error checking health for http://localhost:10502/health: Connection refused (localhost:10502)
System.Net.Http.HttpRequestException: Connection refused (localhost:10502)
 ---> System.Net.Sockets.SocketException (111): Connection refused
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.InjectNewHttp11ConnectionAsync(QueueItem queueItem)
   at System.Threading.Tasks.TaskCompletionSourceWithCancellation`1.WaitWithCancellationAsync(CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|4_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|4_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at Ce.Gateway.Api.Services.DownstreamHealthMonitorService.<>c__DisplayClass10_0.<<CheckAllDownstreamServicesHealth>b__0>d.MoveNext() in /home/runner/work/axe-gateway/axe-gateway/Ce.Gateway.Api/Services/DownstreamHealthMonitorService.cs:line 91
2025-11-05 16:39:22.846 +00:00 [ERR] Error checking health for http://localhost:10501/health: Connection refused (localhost:10501)
System.Net.Http.HttpRequestException: Connection refused (localhost:10501)
 ---> System.Net.Sockets.SocketException (111): Connection refused
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.InjectNewHttp11ConnectionAsync(QueueItem queueItem)
   at System.Threading.Tasks.TaskCompletionSourceWithCancellation`1.WaitWithCancellationAsync(CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|4_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|4_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at Ce.Gateway.Api.Services.DownstreamHealthMonitorService.<>c__DisplayClass10_0.<<CheckAllDownstreamServicesHealth>b__0>d.MoveNext() in /home/runner/work/axe-gateway/axe-gateway/Ce.Gateway.Api/Services/DownstreamHealthMonitorService.cs:line 91
2025-11-05 16:39:36.119 +00:00 [INF] Starting up Ce.Gateway.Api
2025-11-05 16:39:36.307 +00:00 [INF] User profile is available. Using '/home/runner/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-11-05 16:39:36.362 +00:00 [INF] Initializing UI Database
2025-11-05 16:39:36.843 +00:00 [INF] Saving healthchecks configuration to database
2025-11-05 16:39:36.917 +00:00 [INF] Saved 2 entities to in-memory store.
2025-11-05 16:39:36.925 +00:00 [INF] Downstream Health Monitor Service running.
2025-11-05 16:39:36.926 +00:00 [INF] Downstream Health Monitor Service is checking health.
2025-11-05 16:39:37.027 +00:00 [INF] Start processing HTTP request GET http://localhost:10501/health
2025-11-05 16:39:37.026 +00:00 [INF] Start processing HTTP request GET http://localhost:10502/health
2025-11-05 16:39:37.029 +00:00 [INF] Sending HTTP request GET http://localhost:10502/health
2025-11-05 16:39:37.029 +00:00 [INF] Sending HTTP request GET http://localhost:10501/health
2025-11-05 16:39:37.069 +00:00 [ERR] Error checking health for http://localhost:10502/health: Connection refused (localhost:10502)
System.Net.Http.HttpRequestException: Connection refused (localhost:10502)
 ---> System.Net.Sockets.SocketException (111): Connection refused
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.InjectNewHttp11ConnectionAsync(QueueItem queueItem)
   at System.Threading.Tasks.TaskCompletionSourceWithCancellation`1.WaitWithCancellationAsync(CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|4_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|4_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at Ce.Gateway.Api.Services.DownstreamHealthMonitorService.<>c__DisplayClass10_0.<<CheckAllDownstreamServicesHealth>b__0>d.MoveNext() in /home/runner/work/axe-gateway/axe-gateway/Ce.Gateway.Api/Services/DownstreamHealthMonitorService.cs:line 91
2025-11-05 16:39:37.069 +00:00 [ERR] Error checking health for http://localhost:10501/health: Connection refused (localhost:10501)
System.Net.Http.HttpRequestException: Connection refused (localhost:10501)
 ---> System.Net.Sockets.SocketException (111): Connection refused
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.InjectNewHttp11ConnectionAsync(QueueItem queueItem)
   at System.Threading.Tasks.TaskCompletionSourceWithCancellation`1.WaitWithCancellationAsync(CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|4_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|4_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at Ce.Gateway.Api.Services.DownstreamHealthMonitorService.<>c__DisplayClass10_0.<<CheckAllDownstreamServicesHealth>b__0>d.MoveNext() in /home/runner/work/axe-gateway/axe-gateway/Ce.Gateway.Api/Services/DownstreamHealthMonitorService.cs:line 91
2025-11-05 16:39:37.351 +00:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-11-05 16:39:37.379 +00:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-11-05 16:39:37.382 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-11-05 16:39:37.3808709+00:00');
SELECT changes();
2025-11-05 16:39:37.423 +00:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-11-05 16:39:37.429 +00:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-11-05 16:39:37.431 +00:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-11-05 16:39:37.439 +00:00 [INF] No migrations were applied. The database is already up to date.
2025-11-05 16:39:37.442 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-11-05 16:39:37.595 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedName_0='?' (Size = 13)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."ConcurrencyStamp", "a"."Name", "a"."NormalizedName"
FROM "AspNetRoles" AS "a"
WHERE "a"."NormalizedName" = @__normalizedName_0
LIMIT 1
2025-11-05 16:39:37.616 +00:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."ConcurrencyStamp", "a"."Name", "a"."NormalizedName"
FROM "AspNetRoles" AS "a"
WHERE "a"."NormalizedName" = @__normalizedName_0
LIMIT 1
2025-11-05 16:39:37.616 +00:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."ConcurrencyStamp", "a"."Name", "a"."NormalizedName"
FROM "AspNetRoles" AS "a"
WHERE "a"."NormalizedName" = @__normalizedName_0
LIMIT 1
2025-11-05 16:39:37.624 +00:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."CreatedAt", "a"."Email", "a"."EmailConfirmed", "a"."FullName", "a"."IsActive", "a"."LastLoginAt", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UpdatedAt", "a"."UserName"
FROM "AspNetUsers" AS "a"
WHERE "a"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2025-11-05 16:39:37.658 +00:00 [INF] Admin user already exists. Skipping seed.
2025-11-05 16:39:37.773 +00:00 [INF] Service is running
2025-11-05 16:39:37.882 +00:00 [WRN] The ASP.NET Core developer certificate is not trusted. For information about trusting the ASP.NET Core developer certificate, see https://aka.ms/aspnet/https-trust-dev-cert
2025-11-05 16:39:37.889 +00:00 [INF] Now listening on: https://localhost:5001
2025-11-05 16:39:37.889 +00:00 [INF] Now listening on: http://localhost:5000
2025-11-05 16:39:37.912 +00:00 [INF] Start processing HTTP request GET http://localhost:10501/health
2025-11-05 16:39:37.912 +00:00 [INF] Sending HTTP request GET http://localhost:10501/health
2025-11-05 16:39:37.914 +00:00 [ERR] GetHealthReport threw an exception when trying to get report from http://localhost:10501/health configured with name Fake OCR node 1.
System.Net.Http.HttpRequestException: Connection refused (localhost:10501)
 ---> System.Net.Sockets.SocketException (111): Connection refused
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.InjectNewHttp11ConnectionAsync(QueueItem queueItem)
   at System.Threading.Tasks.TaskCompletionSourceWithCancellation`1.WaitWithCancellationAsync(CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|4_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|4_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at HealthChecks.UI.Core.HostedService.HealthCheckReportCollector.GetHealthReportAsync(HealthCheckConfiguration configuration) in /home/runner/work/AspNetCore.Diagnostics.HealthChecks/AspNetCore.Diagnostics.HealthChecks/src/HealthChecks.UI/Core/HostedService/HealthCheckReportCollector.cs:line 142
2025-11-05 16:39:37.915 +00:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-05 16:39:37.917 +00:00 [INF] Hosting environment: Development
2025-11-05 16:39:37.917 +00:00 [INF] Content root path: /home/runner/work/axe-gateway/axe-gateway/Ce.Gateway.Api
2025-11-05 16:39:37.954 +00:00 [INF] Saved 1 entities to in-memory store.
2025-11-05 16:39:38.046 +00:00 [INF] Saved 2 entities to in-memory store.
2025-11-05 16:39:38.047 +00:00 [INF] Start processing HTTP request GET http://localhost:10502/health
2025-11-05 16:39:38.047 +00:00 [INF] Sending HTTP request GET http://localhost:10502/health
2025-11-05 16:39:38.050 +00:00 [ERR] GetHealthReport threw an exception when trying to get report from http://localhost:10502/health configured with name Fake OCR node 2.
System.Net.Http.HttpRequestException: Connection refused (localhost:10502)
 ---> System.Net.Sockets.SocketException (111): Connection refused
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.InjectNewHttp11ConnectionAsync(QueueItem queueItem)
   at System.Threading.Tasks.TaskCompletionSourceWithCancellation`1.WaitWithCancellationAsync(CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|4_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|4_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at HealthChecks.UI.Core.HostedService.HealthCheckReportCollector.GetHealthReportAsync(HealthCheckConfiguration configuration) in /home/runner/work/AspNetCore.Diagnostics.HealthChecks/AspNetCore.Diagnostics.HealthChecks/src/HealthChecks.UI/Core/HostedService/HealthCheckReportCollector.cs:line 142
2025-11-05 16:39:38.054 +00:00 [INF] Saved 1 entities to in-memory store.
2025-11-05 16:39:38.058 +00:00 [INF] Saved 2 entities to in-memory store.
2025-11-05 16:40:14.338 +00:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/account/login - null null
2025-11-05 16:40:14.370 +00:00 [INF] Executing endpoint 'Ce.Gateway.Api.Controllers.Pages.AccountController.Login (Ce.Gateway.Api)'
2025-11-05 16:40:14.378 +00:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller Ce.Gateway.Api.Controllers.Pages.AccountController (Ce.Gateway.Api).
2025-11-05 16:40:14.388 +00:00 [INF] Executing action method Ce.Gateway.Api.Controllers.Pages.AccountController.Login (Ce.Gateway.Api) - Validation state: "Valid"
2025-11-05 16:40:14.391 +00:00 [INF] Executed action method Ce.Gateway.Api.Controllers.Pages.AccountController.Login (Ce.Gateway.Api), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.2997ms.
2025-11-05 16:40:14.402 +00:00 [INF] Executing ViewResult, running view Login.
2025-11-05 16:40:14.424 +00:00 [INF] Executed ViewResult - view Login executed in 22.6726ms.
2025-11-05 16:40:14.425 +00:00 [INF] Executed action Ce.Gateway.Api.Controllers.Pages.AccountController.Login (Ce.Gateway.Api) in 46.5565ms
2025-11-05 16:40:14.425 +00:00 [INF] Executed endpoint 'Ce.Gateway.Api.Controllers.Pages.AccountController.Login (Ce.Gateway.Api)'
2025-11-05 16:40:14.428 +00:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/account/login - 200 null text/html; charset=utf-8 91.7889ms
2025-11-05 16:40:31.973 +00:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/account/login - null null
2025-11-05 16:40:31.977 +00:00 [INF] Executing endpoint 'Ce.Gateway.Api.Controllers.Pages.AccountController.Login (Ce.Gateway.Api)'
2025-11-05 16:40:31.978 +00:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller Ce.Gateway.Api.Controllers.Pages.AccountController (Ce.Gateway.Api).
2025-11-05 16:40:31.980 +00:00 [INF] Executing action method Ce.Gateway.Api.Controllers.Pages.AccountController.Login (Ce.Gateway.Api) - Validation state: "Valid"
2025-11-05 16:40:31.980 +00:00 [INF] Executed action method Ce.Gateway.Api.Controllers.Pages.AccountController.Login (Ce.Gateway.Api), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.0413ms.
2025-11-05 16:40:31.980 +00:00 [INF] Executing ViewResult, running view Login.
2025-11-05 16:40:31.983 +00:00 [INF] Executed ViewResult - view Login executed in 2.9891ms.
2025-11-05 16:40:31.984 +00:00 [INF] Executed action Ce.Gateway.Api.Controllers.Pages.AccountController.Login (Ce.Gateway.Api) in 5.7053ms
2025-11-05 16:40:31.984 +00:00 [INF] Executed endpoint 'Ce.Gateway.Api.Controllers.Pages.AccountController.Login (Ce.Gateway.Api)'
2025-11-05 16:40:31.984 +00:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/account/login - 200 null text/html; charset=utf-8 10.8341ms
2025-11-05 16:40:36.925 +00:00 [INF] Downstream Health Monitor Service is checking health.
2025-11-05 16:40:36.926 +00:00 [INF] Start processing HTTP request GET http://localhost:10502/health
2025-11-05 16:40:36.926 +00:00 [INF] Start processing HTTP request GET http://localhost:10501/health
2025-11-05 16:40:36.926 +00:00 [INF] Sending HTTP request GET http://localhost:10502/health
2025-11-05 16:40:36.927 +00:00 [INF] Sending HTTP request GET http://localhost:10501/health
2025-11-05 16:40:36.928 +00:00 [ERR] Error checking health for http://localhost:10502/health: Connection refused (localhost:10502)
System.Net.Http.HttpRequestException: Connection refused (localhost:10502)
 ---> System.Net.Sockets.SocketException (111): Connection refused
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.InjectNewHttp11ConnectionAsync(QueueItem queueItem)
   at System.Threading.Tasks.TaskCompletionSourceWithCancellation`1.WaitWithCancellationAsync(CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|4_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|4_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at Ce.Gateway.Api.Services.DownstreamHealthMonitorService.<>c__DisplayClass10_0.<<CheckAllDownstreamServicesHealth>b__0>d.MoveNext() in /home/runner/work/axe-gateway/axe-gateway/Ce.Gateway.Api/Services/DownstreamHealthMonitorService.cs:line 91
2025-11-05 16:40:36.928 +00:00 [ERR] Error checking health for http://localhost:10501/health: Connection refused (localhost:10501)
System.Net.Http.HttpRequestException: Connection refused (localhost:10501)
 ---> System.Net.Sockets.SocketException (111): Connection refused
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.InjectNewHttp11ConnectionAsync(QueueItem queueItem)
   at System.Threading.Tasks.TaskCompletionSourceWithCancellation`1.WaitWithCancellationAsync(CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|4_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|4_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at Ce.Gateway.Api.Services.DownstreamHealthMonitorService.<>c__DisplayClass10_0.<<CheckAllDownstreamServicesHealth>b__0>d.MoveNext() in /home/runner/work/axe-gateway/axe-gateway/Ce.Gateway.Api/Services/DownstreamHealthMonitorService.cs:line 91
2025-11-05 16:40:38.086 +00:00 [INF] Start processing HTTP request GET http://localhost:10501/health
2025-11-05 16:40:38.086 +00:00 [INF] Sending HTTP request GET http://localhost:10501/health
2025-11-05 16:40:38.087 +00:00 [ERR] GetHealthReport threw an exception when trying to get report from http://localhost:10501/health configured with name Fake OCR node 1.
System.Net.Http.HttpRequestException: Connection refused (localhost:10501)
 ---> System.Net.Sockets.SocketException (111): Connection refused
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.InjectNewHttp11ConnectionAsync(QueueItem queueItem)
   at System.Threading.Tasks.TaskCompletionSourceWithCancellation`1.WaitWithCancellationAsync(CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|4_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|4_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at HealthChecks.UI.Core.HostedService.HealthCheckReportCollector.GetHealthReportAsync(HealthCheckConfiguration configuration) in /home/runner/work/AspNetCore.Diagnostics.HealthChecks/AspNetCore.Diagnostics.HealthChecks/src/HealthChecks.UI/Core/HostedService/HealthCheckReportCollector.cs:line 142
2025-11-05 16:40:38.091 +00:00 [INF] Notification is sent on same window time.
2025-11-05 16:40:38.098 +00:00 [INF] Saved 1 entities to in-memory store.
2025-11-05 16:40:38.098 +00:00 [INF] Start processing HTTP request GET http://localhost:10502/health
2025-11-05 16:40:38.099 +00:00 [INF] Sending HTTP request GET http://localhost:10502/health
2025-11-05 16:40:38.099 +00:00 [ERR] GetHealthReport threw an exception when trying to get report from http://localhost:10502/health configured with name Fake OCR node 2.
System.Net.Http.HttpRequestException: Connection refused (localhost:10502)
 ---> System.Net.Sockets.SocketException (111): Connection refused
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.InjectNewHttp11ConnectionAsync(QueueItem queueItem)
   at System.Threading.Tasks.TaskCompletionSourceWithCancellation`1.WaitWithCancellationAsync(CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|4_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|4_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at HealthChecks.UI.Core.HostedService.HealthCheckReportCollector.GetHealthReportAsync(HealthCheckConfiguration configuration) in /home/runner/work/AspNetCore.Diagnostics.HealthChecks/AspNetCore.Diagnostics.HealthChecks/src/HealthChecks.UI/Core/HostedService/HealthCheckReportCollector.cs:line 142
2025-11-05 16:40:38.101 +00:00 [INF] Notification is sent on same window time.
2025-11-05 16:40:38.102 +00:00 [INF] Saved 1 entities to in-memory store.
2025-11-05 16:41:07.676 +00:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/account/login - null null
2025-11-05 16:41:07.678 +00:00 [INF] Executing endpoint 'Ce.Gateway.Api.Controllers.Pages.AccountController.Login (Ce.Gateway.Api)'
2025-11-05 16:41:07.679 +00:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller Ce.Gateway.Api.Controllers.Pages.AccountController (Ce.Gateway.Api).
2025-11-05 16:41:07.687 +00:00 [INF] Executing action method Ce.Gateway.Api.Controllers.Pages.AccountController.Login (Ce.Gateway.Api) - Validation state: "Valid"
2025-11-05 16:41:07.687 +00:00 [INF] Executed action method Ce.Gateway.Api.Controllers.Pages.AccountController.Login (Ce.Gateway.Api), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.0158ms.
2025-11-05 16:41:07.687 +00:00 [INF] Executing ViewResult, running view Login.
2025-11-05 16:41:07.688 +00:00 [INF] Executed ViewResult - view Login executed in 1.1999ms.
2025-11-05 16:41:07.689 +00:00 [INF] Executed action Ce.Gateway.Api.Controllers.Pages.AccountController.Login (Ce.Gateway.Api) in 9.6878ms
2025-11-05 16:41:07.689 +00:00 [INF] Executed endpoint 'Ce.Gateway.Api.Controllers.Pages.AccountController.Login (Ce.Gateway.Api)'
2025-11-05 16:41:07.689 +00:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/account/login - 200 null text/html; charset=utf-8 12.773ms
2025-11-05 16:41:18.817 +00:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/account/login - null null
2025-11-05 16:41:18.818 +00:00 [INF] Executing endpoint 'Ce.Gateway.Api.Controllers.Pages.AccountController.Login (Ce.Gateway.Api)'
2025-11-05 16:41:18.818 +00:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller Ce.Gateway.Api.Controllers.Pages.AccountController (Ce.Gateway.Api).
2025-11-05 16:41:18.819 +00:00 [INF] Executing action method Ce.Gateway.Api.Controllers.Pages.AccountController.Login (Ce.Gateway.Api) - Validation state: "Valid"
2025-11-05 16:41:18.819 +00:00 [INF] Executed action method Ce.Gateway.Api.Controllers.Pages.AccountController.Login (Ce.Gateway.Api), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.0185ms.
2025-11-05 16:41:18.820 +00:00 [INF] Executing ViewResult, running view Login.
2025-11-05 16:41:18.820 +00:00 [INF] Executed ViewResult - view Login executed in 0.5265ms.
2025-11-05 16:41:18.820 +00:00 [INF] Executed action Ce.Gateway.Api.Controllers.Pages.AccountController.Login (Ce.Gateway.Api) in 1.6496ms
2025-11-05 16:41:18.821 +00:00 [INF] Executed endpoint 'Ce.Gateway.Api.Controllers.Pages.AccountController.Login (Ce.Gateway.Api)'
2025-11-05 16:41:18.821 +00:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/account/login - 200 null text/html; charset=utf-8 3.3653ms
2025-11-05 16:41:58.129 +00:00 [INF] Starting up Ce.Gateway.Api
2025-11-05 16:41:58.303 +00:00 [INF] User profile is available. Using '/home/runner/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-11-05 16:41:58.343 +00:00 [INF] Initializing UI Database
2025-11-05 16:41:58.835 +00:00 [INF] Saving healthchecks configuration to database
2025-11-05 16:41:58.910 +00:00 [INF] Saved 2 entities to in-memory store.
2025-11-05 16:41:58.917 +00:00 [INF] Downstream Health Monitor Service running.
2025-11-05 16:41:58.918 +00:00 [INF] Downstream Health Monitor Service is checking health.
2025-11-05 16:41:59.000 +00:00 [INF] Start processing HTTP request GET http://localhost:10501/health
2025-11-05 16:41:59.001 +00:00 [INF] Start processing HTTP request GET http://localhost:10502/health
2025-11-05 16:41:59.002 +00:00 [INF] Sending HTTP request GET http://localhost:10501/health
2025-11-05 16:41:59.002 +00:00 [INF] Sending HTTP request GET http://localhost:10502/health
2025-11-05 16:41:59.040 +00:00 [ERR] Error checking health for http://localhost:10502/health: Connection refused (localhost:10502)
System.Net.Http.HttpRequestException: Connection refused (localhost:10502)
 ---> System.Net.Sockets.SocketException (111): Connection refused
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.InjectNewHttp11ConnectionAsync(QueueItem queueItem)
   at System.Threading.Tasks.TaskCompletionSourceWithCancellation`1.WaitWithCancellationAsync(CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|4_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|4_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at Ce.Gateway.Api.Services.DownstreamHealthMonitorService.<>c__DisplayClass10_0.<<CheckAllDownstreamServicesHealth>b__0>d.MoveNext() in /home/runner/work/axe-gateway/axe-gateway/Ce.Gateway.Api/Services/DownstreamHealthMonitorService.cs:line 91
2025-11-05 16:41:59.040 +00:00 [ERR] Error checking health for http://localhost:10501/health: Connection refused (localhost:10501)
System.Net.Http.HttpRequestException: Connection refused (localhost:10501)
 ---> System.Net.Sockets.SocketException (111): Connection refused
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.InjectNewHttp11ConnectionAsync(QueueItem queueItem)
   at System.Threading.Tasks.TaskCompletionSourceWithCancellation`1.WaitWithCancellationAsync(CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|4_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|4_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at Ce.Gateway.Api.Services.DownstreamHealthMonitorService.<>c__DisplayClass10_0.<<CheckAllDownstreamServicesHealth>b__0>d.MoveNext() in /home/runner/work/axe-gateway/axe-gateway/Ce.Gateway.Api/Services/DownstreamHealthMonitorService.cs:line 91
